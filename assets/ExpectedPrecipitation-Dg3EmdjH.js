import{q as C,r as c,E as L,b5 as S,g as I,ae as W,z as y,H as a,N as e,O as g,U as w,Q as N,y as i,R as l,I as P,aG as R,T as b}from"./index-CnjAwGzq.js";import{E as T,a as V}from"./el-row-6myvjMWJ.js";import{a as x,f as B,b as O,_ as z}from"./caiyunapp-qq9SuBtY.js";const U=C({__name:"ExpectedPrecipitation",setup(q){const u=c(),p=c(),d=c(1),E=()=>{p.value=setInterval(()=>{d.value>=3600?(d.value=1,_(),h()):d.value++},1e3)};L(()=>{_(),h(),E()});const _=async()=>{const{rectangle:s}=await x(),{result:n}=await B(s.split(";")[0]);u.value=n.hourly.precipitation.map(t=>t.probability)},f=S(),r=c("0000"),v=c(),h=async()=>{var t;const{rectangle:s}=await x(),{result:n}=await O(s.split(";")[0],!0);(t=n.alert)!=null&&t.content[0].code&&(r.value=n.alert.content[0].code,v.value="background-color: "+f.getWeatherLevel(r.value.slice(0,2)))},k=I(()=>{const s={"01":"蓝色","02":"黄色","03":"橙色","04":"红色"};let n="";return r.value!=="0000"&&(n=f.getWeatherType(r.value.slice(2))+s[r.value.slice(0,2)]+"预警"),n});return W(()=>{clearInterval(p.value),p.value=null}),(s,n)=>{const t=T,o=V;return i(),y("div",null,[a(t,{style:{padding:"2.5vh 5vw"}},{default:e(()=>[l(" 未来 6 小时下雨概率 ")]),_:1}),a(t,null,{default:e(()=>[a(o,{span:4},{default:e(()=>[l("1h")]),_:1}),a(o,{span:4},{default:e(()=>[l("2h")]),_:1}),a(o,{span:4},{default:e(()=>[l("3h")]),_:1}),a(o,{span:4},{default:e(()=>[l("4h")]),_:1}),a(o,{span:4},{default:e(()=>[l("5h")]),_:1}),a(o,{span:4},{default:e(()=>[l("6h")]),_:1})]),_:1}),u.value?(i(),g(t,{key:0},{default:e(()=>[(i(),y(P,null,R([0,1,2,3,4,5],m=>a(o,{span:4,key:m},{default:e(()=>[l(b(u.value[m])+"% ",1)]),_:2},1024)),64))]),_:1})):w("",!0),v.value?(i(),g(t,{key:1,style:N([{color:"white","font-weight":"800",padding:"2vh 6vw"},v.value])},{default:e(()=>[l(b(k.value),1)]),_:1},8,["style"])):w("",!0)])}}}),G=z(U,[["__scopeId","data-v-5e1284cd"]]);export{G as default};
